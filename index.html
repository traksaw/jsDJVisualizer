<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Phase 2 â€“ Meyda + p5.js Visuals</title>
    <link rel="stylesheet" href="css/styles.css">
    <!-- p5.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.0/p5.min.js"></script>
    <!-- Meyda -->
    <script src="https://unpkg.com/meyda/dist/web/meyda.min.js"></script>
    <!-- Realtime BPM Analyzer -->
  <script type="module">
    import * as realtimeBpmAnalyzer from 'https://cdn.skypack.dev/realtime-bpm-analyzer';
    window.realtimeBpmAnalyzer = realtimeBpmAnalyzer;
  </script>
    
    <!-- Modular JS files -->
    <script src="js/audio.js"></script>
    <script src="js/particles.js"></script>
    <script src="js/visualizations.js"></script>
    <script src="js/eq-puzzle.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/main.js"></script>
    <script src="js/init.js"></script>
  </head>
  <body>
    <div class="ui">
      <div class="ui-row">
        <button id="start">Start</button>
        <button id="stop">Stop</button>
        <select id="inputs"></select>
      </div>
      <div class="ui-row">
        <button id="mode-smoke" class="active">Smoke</button>
        <button id="mode-flocking">Flocking</button>
        <button id="mode-connected">Connected</button>
        <button id="mode-eq">EQ Visual</button>
        <button id="mode-separated">EQ Waves</button>
        <button id="mode-puzzle">EQ Puzzle</button>
      </div>
      <div class="slider-container">
        <label>Sensitivity:</label>
        <input type="range" id="sensitivity" min="0.5" max="3" step="0.1" value="1">
      </div>
      <div class="slider-container">
        <label>Color Hue:</label>
        <input type="range" id="colorHue" min="0" max="360" step="1" value="180">
      </div>
    </div>

    <div class="info">
      <p>Press SPACE for fullscreen | Use Color Hue slider to change colors</p>
    </div>

    <div class="performance-stats" id="stats">
      FPS: <span id="fps">60</span> | Particles: <span id="particleCount">0</span>
    </div>

    <div class="analysis-stats" id="analysis">
      <div><strong>Audio:</strong> <span id="audioStatus">inactive</span> | <strong>BPM:</strong> <span id="bpmVal">0</span></div>
      <div><strong>RMS:</strong> <span id="rmsVal">0.000</span> | <strong>Centroid (Hz):</strong> <span id="centroidVal">0</span></div>
      <div><strong>Bass:</strong> <span id="bassVal">0.00</span> | <strong>Mid:</strong> <span id="midVal">0.00</span> | <strong>High:</strong> <span id="trebleVal">0.00</span></div>
      <div class="features-note">Meyda: rms, spectralCentroid, mfcc, chroma + Beat Detection</div>
    </div>

  </body>
</html>
